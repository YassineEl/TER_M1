<!DOCTYPE html>
<html>
 
 <head>
 
<!-- En-tÃªte du document  -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
 
  <!-- Balise meta  -->

  <meta name="description" content="description de la page">
 
 

  
 
  <!--  Relier une feuille CSS externe  -->
  <link rel='stylesheet' href='css/bootstrap.css' type='text/css' />
  <link rel='stylesheet' href='css/bootstrap.min.css' type='text/css' />
  <link rel='stylesheet' href='css/bootstrap-theme.css' type='text/css' />
  <link rel='stylesheet' href='css/bootstrap-theme.min.css' type='text/css' />
  
  <!-- Incorporez du CSS dans la page  -->
  <style type="text/css" media="screen">

  #gauche{
	position:					fixed;
	top:						10px;
	height:						100%;
	width:						18%;
	padding:					20px;
}

#droite{
	height:						100%;
	width:						80%;
	float:						right;
	margin:						0 auto;
	margin-top:					10px;
}
  
			text {
  font: 50px sans-serif;
  pointer-events: none;
}

text.id {
  text-anchor: middle;
  font-weight: bold;
  -webkit-user-select: none; 
-khtml-user-select: none;
-moz-user-select: none;
}
	</style>
  
        
		<script src="js/bootstrap.js"></script>
		<script src="bootstrap.min.js"></script>
		<script src="npm.js"></script>
		

		<script src="jquery.js"></script>
		<script src="automate.js"></script>
		<script src="transition.js"></script>
		<script src="etat.js"></script>
		<script src="matrice.js"></script>
		<script src="animation.js"></script>
		<script>
			
			
			var t,e,f,aut,ini;
			var svg;
			
			
			$(document).ready(function(){
				
				
				$("#play").hide();
				$("#stop").hide();
				$("#textarea").hide();
				svg=$("#svg")[0];
			
				






					





					
				
			    t=[]; //les transations

				et=[];// les etiquettes

				f=[];// les etats finaux
			    
				ini=[];//les etats initiaux



				var fileInput = document.getElementById('fileInput');
				var fileDisplayArea = document.getElementById('fileDisplayArea');

				fileInput.addEventListener('change', function(e) {
			var file = fileInput.files[0];
			var textType = /text.*/;

			if (file.type.match(textType)) {
				var reader = new FileReader();

				reader.onload = function(e) {
					 


					 var result=reader.result.split("\n");

					 	var i;
					 	var etiquettes=result[1].split(",");

					 	// les etiquettes
					 	
					 	for(i=0;i<etiquettes.length;i++){
					 		et.push(etiquettes[i]);
					 		
					 		
					 	}

					 	
					 	for(i=4;i<result.length;i++)
					 		{
					 			
								var tran=result[i].split("=>");
									if(tran.length==3)
								t.push(new Transition(parseInt(tran[0]),tran[1], parseInt(tran[2]) ));					 			



					 		}						


					 		// les etats puits
					 		var etatPuis=result[3].split(",");
					 		for(i=0;i<etatPuis.length;i++)
					 			
					 				{

					 					
					 			f.push(etatPuis[i]);

					 				}

					 		// les etats initiaux
					 		var etatini=result[2].split(",");
					 		for(i=0;i<etatini.length;i++)
					 			ini.push(etatini[i]);


					 		 aut=new Automate(parseInt(result[0]),et,f,ini,t,svg);
							 aut.initialiser();
		

				}

				reader.readAsText(file);	
			} else {
				fileDisplayArea.innerText = "File not supported!";
			}
		});








			   		
				$("#tel").click(function(){

					aut.telecharger();
				});  
				
				$("textarea").keydown(function(e){
                    
                     if (e.keyCode == 13 && !e.shiftKey)
                         {
        					e.preventDefault();
                   			

        					
        				
                   		 	aut.reconaissance($("#textarea").val());

                   		 	$("textarea")[0].value="";
                   		 }



                   		
				});  


			});
		
		</script>







<title>automate</title> 
 
 
 </head>
 <body>
 
  			
	<div id="gauche">
	<div id="page-wrapper">

		
			
		
	

	</div>

	
	
	
	





	



	<ul>

	

	</div>









  <div class="col-sm-3 col-md-2 sidebar">
          <ul  class="nav nav-sidebar">
            <li class="active"><a href="#">Overview <span class="sr-only">(current)</span></a></li>
            <li><input type="file" id="fileInput"></li>
            <li><a href="#" id="tel">telecharger le fichier SVG </a></li>
            <li><a href="test.txt" download>telecharger un exemple de fichier test</a></li>
            <li><a href="source.zip" download>telecharger le code source</a></li>
            <li><textarea id="textarea"  rows="4"; ></textarea></li>
       

          </ul>
        

          <ul  class="nav nav-sidebar">
      
           <li id="play" class="glyphicon glyphicon-play" />Lancer l'animation courante</li>
           <li id="stop" class="glyphicon glyphicon-pause">Stoppler l'animation</li>
          </ul>

          <ul id="ul" class="nav nav-sidebar">
      
 
          </ul>
        </div>

   







    <div class="container-fluid">
     <div id="droite">
			
		
		<svg  id="svg" height="800" width="1000"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
		 <rect x="0" y="0" width="1000" height="800" fill="thistle" id="bpard" />
		<defs id="definition">
    <marker id="Triangle"
      viewBox="0 0 10 10" refX="0" refY="5" 
      markerUnits="strokeWidth"
      markerWidth="4" markerHeight="3"
      orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" />
    </marker>
    </defs>
		
		</svg>

	</div>
    </div>


 </body>
</html>
